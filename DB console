CREATE schema if not exists dbproductlist default character set utf8;
use dbproductlist;

CREATE TABLE IF NOT EXISTS product
(
    id       int (100) not null AUTO_INCREMENT,
    name varchar(100) not null,
    price    int(100) not null,
    category varchar(100) null,
    discount int(100) null,
    description varchar(100) null,
    user_id int(100) null,
    created  timestamp default CURRENT_TIMESTAMP,
    PRIMARY KEY (id)
)
    engine = InnoDB
    AUTO_INCREMENT = 1000;

CREATE TABLE IF NOT EXISTS users
(
    id       int (100) not null AUTO_INCREMENT,
    login    varchar(100) not null,
    password varchar(100) not null,
    created  timestamp default CURRENT_TIMESTAMP,
    PRIMARY KEY (id)

)
    engine = InnoDB
    AUTO_INCREMENT = 1000;

ALTER table product add constraint user_product_fk foreign key (user_id) references users(id);

Create table if not exists orders
(
    id         int(100) not null AUTO_INCREMENT,
    product_id int(100) not null,
    user_id    int(100) not null,
    created    timestamp default CURRENT_TIMESTAMP,
    PRIMARY KEY (id)
)
    engine = InnoDB
    AUTO_INCREMENT = 1000;

Alter table orders
    add constraint orders_users_fk FOREIGN KEY (user_id) references users (id);

Alter table orders
    add constraint orders_product_fk foreign key (product_id) references product (id);
